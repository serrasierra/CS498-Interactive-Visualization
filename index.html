<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<style>
* {box-sizing: border-box}
body {font-family: Verdana, sans-serif; margin:0}
.mySlides {display: none}
img {vertical-align: middle;}

/* Slideshow container */
.slideshow-container {
  position: relative;
  margin: auto;
}

/* Next & previous buttons */
.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}

/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}

/* Caption text */
.slideContent {
  padding: 50px;
  text-align: center;
  border-bottom: 1px solid rgba(0,0,0,0.2);
  
}

/* Number text (1/3 etc) */
.numbertext {
  color: rgba(0,0,0,0.8);
  font-size: 12px;
  padding: 8px 12px;
  position: absolute;
  top: 0;
}

/* The dots/bullets/indicators */
.dot {
  cursor: pointer;
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active, .dot:hover {
  background-color: #717171;
}

/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}

@-webkit-keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {
  .prev, .next,.text {font-size: 11px}
}
</style>
</head>
<body>

<div class="slideshow-container">

<div class="mySlides fade">
  <div class="numbertext">1 / 3</div>
  <div class="slideContent">
  	<h1> Evolution of Fuel Efficiency in Cars</h1>
    <p> Since the birth of the modern car in 1886, humans have relied mostly on gasoline to fuel their cars. Throughout most of the 1900s, there wasn't much advocacy for better fuel efficiency in cars. It wasn't until 1975, when congress passed the Energy Policy and Conservation Act of 1975, which established fuel economy standards for cars starting with the model year 1978. By 1985 cars would be expected to have doubled their fuel efficiency to a respectable 27.5 MPG.</p>
<br><br>
<div id="svgContainer"></div>
<p>Check out the next slide to learn about the next major legislation to affect fuel efficiency standards across the US</p>
   
  </div>
</div>

<div class="mySlides fade">
  <div class="numbertext">2 / 3</div>
    <div class="slideContent">
  	<h1>Fuel efficiency in Cars during 1970s-1980s</h1>
    <p>The following chart shows fuel efficiency ratings for major car brands in relation to the number of cylinders</p>
<br><br>
<p>Check out the next slide to learn about the next major legislation to affect fuel efficiency standards across the US</p>
   
  </div>
</div>

<div class="mySlides fade">
  <div class="numbertext">3 / 3</div>
</div>

<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
<a class="next" onclick="plusSlides(1)">&#10095;</a>

</div>
<br>

<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
</div>

<script>

var margin = {top:10,right:20,bottom:30,left:50},
    width = 500 - margin.left - margin.right,
    height = 300;

var svg = 
d3.select("#svgContainer")
.append("svg")
.attr("width",width + margin.left + margin.right)
.attr("height",height + margin.top + margin.bottom)
  .append("g")
  .attr("transform","translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://gist.githubusercontent.com/omarish/5687264/raw/7e5c814ce6ef33e25d5259c1fe79463c190800d9/mpg.csv",function(data) {
  var x = d3.scaleLinear()
  .domain([0,50])
  .range([0,width]);
  svg
  .append("g")
  .attr("transform","translate(0," + height + ")")
  .call(d3.axisBottom(x));
  svg
  .append("text")
  .attr("x",220)
  .attr("y",330)
  .style("text-anchor","middle").text("MPG");

  var y = 
  d3.scaleLinear()
  .domain([0,300])
  .range([height,0]);
  svg.append("g")
  .call(d3
  .axisLeft(y));
  svg
  .append("text")
  .attr("x",-130)
  .attr("y",-30)
  .style("text-anchor","middle")
  .text("Horsepower")
  .attr("transform","rotate(-90)");

  // Add a scale for bubble size
  var z = d3.scaleLinear().domain([1,300]).range([7,12]);

  // Add a scale for bubble color
  var myColor = d3.scaleOrdinal().domain(["Mazda","Datsun","Hornet","Valiant","Duster","Merc","Cadillac","Lincoln","Chrysler","Fiat","Honda","Toyota"
                ,"Dodge","AMC","Camaro","Pontiac","Porsche","Lotus","Ford","Ferrari","Maserati","Volvo"]).range(d3.schemeSet3);

  var tooltip = d3.select("#svg_container").append("div").style("opacity",0).attr("class","tooltip") .style("background-color","black")
      .style("border-radius","5px")
      .style("padding","10px")
      .style("color","white")

  var showTooltip = function(d) {
    tooltip.transition().duration(200)
    tooltip.style("opacity",1).html("Make: " + d.name + "<br>Horsepower: " + d.horsepower + "<br>Engine Cylinders: " + d.cylinders + "<br>MPG: " + d.mpg + "<br>Weight (lbs): " + d.weight)
      .style("left",(d3.mouse(this)[0]+30) + "px")
      .style("top",(d3.mouse(this)[1]+30) + "px")
  }
  var moveTooltip = function(d) {
    tooltip.style("left",(d3.mouse(this)[0]+30) + "px").style("top", (d3.mouse(this)[1]+30) + "px")
  }
  var hideTooltip = function(d) {
    tooltip.transition().duration(200).style("opacity",0)
  }

  // Add dots
  svg.append('g').selectAll("dot").data(data).enter().append("circle").attr("class","bubbles")
      .attr("cx",function(d) { return x(d.mpg); } )
      .attr("cy",function(d) { return y(d.horsepower); } )
      .attr("r",function(d) { return z(d.cylinders); } )
      .style("fill",function(d) { return myColor(d.name.split(" ")[0]); } )
    .on("mouseover",showTooltip)
    .on("mousemove",moveTooltip)
    .on("mouseleave",hideTooltip)
  })


var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
}
</script>

</body>
</html> 
